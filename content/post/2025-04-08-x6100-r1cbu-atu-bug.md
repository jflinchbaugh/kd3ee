---
title: "X6100 R1CBU 0.29.2 ATU Bug"
date: 2025-04-08T00:00:00Z
draft: false
---

I encountered a bug with the ATU
in the X6100 running R1CBU firmware version 0.29.2.

The ATU networking information
is stored in both a cache
and the `params.db` file.
When setting multiple tunings close
to each other (e.g., 7073, 7074, 7075 kHz),
the radio would rapidly cycle
through them as the VFO was spun.
This behavior cluttered the configurations
and made it difficult for the ATU network
to hold a stable tune near a signal.

Upon investigation,
I discovered that while the cache retained all these closely spaced tunings,
the `params.db` only saved one of them.
The intention behind the new feature in R1CBU
was to remove the hard boundaries between ATU configurations
(which were previously every 25 or 50 kHz),
allowing a single tuning network to be effective
within approximately 25 kHz in either direction.
The database would correctly update a nearby frequency to the middle,
but the cache's retention
of every tuning caused the "thrashing" effect.
Switching antennas or cycling power
would reload the sparser collection
of networks from the database,
temporarily resolving the issue.

I filed a [bug report](https://github.com/gdyuldin/x6100_gui/issues/134),
and submitted a
[pull request to fix it](https://github.com/gdyuldin/x6100_gui/pull/144).

I patched the ATU code to reload the cache from the database immediately,
effectively discarding the extraneous nearby networks.
